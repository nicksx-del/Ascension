<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Ascension</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Page-specific overrides or critical inline styles can go here if absolutely necessary */
    </style>
</head>

<body>
    <div class="container">

        <!-- Header -->
        <div class="header">
            <div class="user-info">
                <div class="avatar">
                    <div class="avatar-placeholder" id="userAvatar">JH</div>
                </div>
                <div class="user-text">
                    <span class="greeting">Bem-vindo,</span>
                    <span class="user-name" id="userName">Josh Hill</span>
                </div>
            </div>
            <div class="header-actions">
                <button class="icon-button">
                    <svg fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z" />
                    </svg>
                </button>
                <button class="icon-button">
                    <svg fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Balance Card -->
        <div class="balance-card">
            <div class="balance-header">
                <span class="balance-label">Gasto Total</span>
                <button class="menu-button" style="font-size: 20px;">⚙</button>
            </div>
            <div class="balance-amount" id="totalExpensesDisplay">R$ 0,00</div>
            <div class="card-info">
                <div class="card-holder">
                    <span class="card-label">Titular do Cartão</span>
                    <span class="card-name" style="color: #5e5e62;">-----</span>
                </div>
                <div class="card-right" style="flex-direction: column; align-items: flex-end; gap: 8px;">
                    <span class="card-number">**** **** **** ****</span>
                    <button class="glass-button-orange" onclick="window.location.href='configurar-cartao.html'">
                        CONFIGURAR CARTÃO
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                            <polyline points="12 5 19 12 12 19"></polyline>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="quick-stats">
            <div class="stat-card" style="cursor: pointer;" onclick="window.location.href='gastos.html'">
                <div class="stat-title">Gastos</div>
                <div class="stat-subtitle">Outubro</div>
                <div class="expense-bars">
                    <div class="bar" style="background: #FF6B00; height: 70%;"></div>
                    <div class="bar" style="background: #FF8533; height: 50%;"></div>
                    <div class="bar" style="background: #5a6b7f; height: 78%;"></div>
                    <div class="bar" style="background: #d8d8dc; height: 38%;"></div>
                </div>
            </div>
            <div class="stat-card" style="cursor: pointer;" onclick="window.location.href='cashback.html'">
                <div class="stat-title">Cash Back</div>
                <div class="cashback-amount">+ R$ 124,50</div>
                <div class="cashback-icons">
                    <div class="cashback-icon" style="background: #1c1c1e;">N</div>
                    <div class="cashback-icon" style="background: #FF3B30;">M</div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <button class="action-button primary" onclick="window.location.href='novo-registro.html'">
                <div class="action-icon plus">+</div>
            </button>
            <button class="action-button">
                <div class="action-icon" style="background: #f0f0f2;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                            d="M12 1v6M12 17v6M4.22 4.22l4.24 4.24M15.54 15.54l4.24 4.24M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.24-4.24">
                        </path>
                    </svg>
                </div>
                <span class="action-text">Dicas e<br>Treino</span>
            </button>
            <button class="action-button">
                <div class="action-icon" style="background: #f0f0f2;">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z" />
                    </svg>
                </div>
                <span class="action-text">Tudo</span>
            </button>
        </div>

        <!-- Promo Banner -->
        <div class="promo-banner">
            <div class="promo-dot"></div>
            <div class="promo-decoration"></div>
            <div class="promo-content">
                <h3>Indique e Ganhe</h3>
                <p>Compartilhe seu link de indicação e ganhe recompensas exclusivas.</p>
                <button class="promo-button">Saber mais</button>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <a href="#" class="nav-item active">
                <svg fill="currentColor" viewBox="0 0 24 24">
                    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                </svg>
                <span>Início</span>
            </a>
            <a href="habitos.html" class="nav-item">
                <svg fill="currentColor" viewBox="0 0 24 24">
                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
                </svg>
                <span>Hábitos</span>
            </a>
            <a href="#" class="nav-item">
                <svg fill="currentColor" viewBox="0 0 24 24">
                    <path
                        d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z" />
                </svg>
                <span>Msg</span>
                <span class="badge"></span>
            </a>
            <a href="perfil.html" class="nav-item">
                <svg fill="currentColor" viewBox="0 0 24 24">
                    <path
                        d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                </svg>
                <span>Perfil</span>
            </a>
        </nav>
    </div>

    <script>
        // Carregar informações do usuário do localStorage
        const userData = JSON.parse(localStorage.getItem('ascension_user') || '{}');

        if (userData.name) {
            document.getElementById('userName').textContent = userData.name;
            const initials = userData.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();
            document.getElementById('userAvatar').textContent = initials;
        }

        // Se não houver usuário logado, redirecionar para login
        if (!userData.isLoggedIn) {
            window.location.href = 'index.html';
        }

        // Carregar dados do cartão do localStorage
        const cardData = JSON.parse(localStorage.getItem('ascension_card') || '{}');

        if (cardData.holder && cardData.lastDigits) {
            // Atualizar o card com os dados reais
            const cardHolderElement = document.querySelector('.card-name');
            const cardNumberElement = document.querySelector('.card-number');
            const configButton = document.querySelector('.card-right button');

            // Mostrar nome do titular
            cardHolderElement.textContent = cardData.holder;
            cardHolderElement.style.color = 'white';

            // Mostrar últimos 4 dígitos
            cardNumberElement.textContent = `**** ${cardData.lastDigits}`;

            // Esconder o botão de configurar
            if (configButton) {
                configButton.style.display = 'none';
            }

            // Ajustar layout do card-right para horizontal
            if (cardRight) {
                cardRight.style.flexDirection = 'row';
                cardRight.style.alignItems = 'center';
            }
        }

        // Calcular e exibir "Gasto Total"
        const transactions = JSON.parse(localStorage.getItem('ascension_transactions') || '[]');
        const totalExpenses = transactions.reduce((sum, t) => sum + Number(t.amount || 0), 0);

        document.getElementById('totalExpensesDisplay').textContent = totalExpenses.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
    </script>
</body>

</html>